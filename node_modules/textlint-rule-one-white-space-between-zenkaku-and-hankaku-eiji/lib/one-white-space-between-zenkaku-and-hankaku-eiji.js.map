{"version":3,"sources":["../src/one-white-space-between-zenkaku-and-hankaku-eiji.js"],"names":["ZEN_HAN","HAN_ZEN","ALLOW_CHARS","helper","context","Syntax","getSource","RuleError","report","Str","node","isChildNode","Link","Image","BlockQuote","text","err","matches","index","c","match","indexOf"],"mappings":"AAAA;;;;;;;AAOA;;;;;;AAEA;;;;AAEA,IAAMA,UAAU,+FAAhB;AACA,IAAMC,UAAU,+FAAhB;AACA,IAAMC,cAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,CAApB;;kBAEe,mBAAW;AACtB,QAAMC,SAAS,mCAAeC,OAAf,CAAf;AADsB,QAEdC,MAFc,GAE2BD,OAF3B,CAEdC,MAFc;AAAA,QAENC,SAFM,GAE2BF,OAF3B,CAENE,SAFM;AAAA,QAEKC,SAFL,GAE2BH,OAF3B,CAEKG,SAFL;AAAA,QAEgBC,MAFhB,GAE2BJ,OAF3B,CAEgBI,MAFhB;;;AAItB,+BACKH,OAAOI,GADZ,YACiBC,IADjB,EACuB;AACf,YAAIP,OAAOQ,WAAP,CAAmBD,IAAnB,EAAyB,CAACL,OAAOO,IAAR,EAAcP,OAAOQ,KAArB,EAA4BR,OAAOS,UAAnC,CAAzB,CAAJ,EAA8E;AAC1E;AACH;;AAED,YAAMC,OAAOT,UAAUI,IAAV,CAAb;AACA,YAAIM,MAAM,KAAV;AACA,YAAIC,gBAAJ;AAAA,YAAaC,cAAb;AAAA,YAAoBC,UAApB;;AAEAF,kBAAUF,KAAKK,KAAL,CAAWpB,OAAX,CAAV;AACA,YAAIiB,OAAJ,EAAa;AACTC,oBAAQD,QAAQC,KAAR,GAAgB,CAAxB;AACAC,gBAAIF,QAAQ,CAAR,EAAW,CAAX,CAAJ;AACA,gBAAIf,YAAYmB,OAAZ,CAAoBF,CAApB,IAAyB,CAAzB,IAA8BA,MAAM,GAAxC,EAA6C;AACzCH,sBAAM,IAAN;AACH;AACJ,SAND,MAMO;AACHC,sBAAUF,KAAKK,KAAL,CAAWnB,OAAX,CAAV;AACA,gBAAIgB,OAAJ,EAAa;AACTC,wBAAQD,QAAQC,KAAhB;AACAC,oBAAIF,QAAQ,CAAR,EAAW,CAAX,CAAJ;AACA,oBAAIf,YAAYmB,OAAZ,CAAoBF,CAApB,IAAyB,CAAzB,IAA8BA,MAAM,GAAxC,EAA6C;AACzCH,0BAAM,IAAN;AACH;AACJ;AACJ;;AAED,YAAIA,GAAJ,EAAS;AACLR,mBAAOE,IAAP,EAAa,IAAIH,SAAJ,CAAc,0BAAd,EAA0C,EAAEW,YAAF,EAA1C,CAAb;AACH;AACJ,KA/BL;AAiCH,C","file":"one-white-space-between-zenkaku-and-hankaku-eiji.js","sourcesContent":["/**\n * Copyright 2016, Z Lab Corporation. All rights reserved.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n\"use strict\";\n\nimport { RuleHelper } from \"textlint-rule-helper\";\n\nconst ZEN_HAN = /(?:[\\u3400-\\u4DBF\\u4E00-\\u9FFF\\uF900-\\uFAFF]|[\\uD840-\\uD87F][\\uDC00-\\uDFFF]|[ぁ-んァ-ヶ])[A-Za-z]/;\nconst HAN_ZEN = /[A-Za-z](?:[\\u3400-\\u4DBF\\u4E00-\\u9FFF\\uF900-\\uFAFF]|[\\uD840-\\uD87F][\\uDC00-\\uDFFF]|[ぁ-んァ-ヶ])/;\nconst ALLOW_CHARS = [\"、\", \"。\", \"「\", \"」\", \"（\", \"）\", \"｛\", \"｝\", \"【\", \"】\", \"『\", \"』\"];\n\nexport default context => {\n    const helper = new RuleHelper(context);\n    const { Syntax, getSource, RuleError, report } = context;\n\n    return {\n        [Syntax.Str](node) {\n            if (helper.isChildNode(node, [Syntax.Link, Syntax.Image, Syntax.BlockQuote])) {\n                return;\n            }\n\n            const text = getSource(node);\n            let err = false;\n            let matches, index, c;\n\n            matches = text.match(ZEN_HAN);\n            if (matches) {\n                index = matches.index + 1;\n                c = matches[0][0];\n                if (ALLOW_CHARS.indexOf(c) < 0 && c !== \" \") {\n                    err = true;\n                }\n            } else {\n                matches = text.match(HAN_ZEN);\n                if (matches) {\n                    index = matches.index;\n                    c = matches[0][1];\n                    if (ALLOW_CHARS.indexOf(c) < 0 && c !== \" \") {\n                        err = true;\n                    }\n                }\n            }\n\n            if (err) {\n                report(node, new RuleError(\"全角文字と半角英字の間に半角スペースを入れます。\", { index }));\n            }\n        }\n    };\n};\n"]}